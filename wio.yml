version: 1.0
provider:
  name: openfaas
  gateway: http://cdd3a598-e11f-4de5-8586-dcb73e192d67.k8s.civo.com:31112
functions:
  fahrenheit:
    lang: dockerfile
    handler: ./wio
    image: dukeman/wio:1.0.0
    annotations:
      topic: cron-function
      schedule: "* * * * *"
    environment_file:
    - wio/base-env.yml
    secrets:
    - wio1
    environment:
      TOKEN_PATH: "/var/openfaas/secrets/wio1"
      TARGET_SENSOR: GroveTempHumD0
      TARGET_SENSOR_PATH: temperature_f
      TARGET_READING_KEY: fahrenheit_degree
      write_debug: "true"
  celsius:
    lang: dockerfile
    handler: ./wio
    image: dukeman/wio:1.0.0
    annotations:
      topic: cron-function
      schedule: "* * * * *"
    environment_file:
    - wio/base-env.yml
    secrets:
    - wio1
    environment:
      TOKEN_PATH: "/var/openfaas/secrets/wio1"
      TARGET_SENSOR: GroveTempHumD0
      TARGET_SENSOR_PATH: temperature
      TARGET_READING_KEY: celsius_degree
      write_debug: "true"
  lux:
    lang: dockerfile
    handler: ./wio
    image: dukeman/wio:1.0.0
    annotations:
      topic: cron-function
      schedule: "* * * * *"
    environment_file:
    - wio/base-env.yml
    secrets:
    - wio2
    environment:
      TOKEN_PATH: "/var/openfaas/secrets/wio2"
      TARGET_SENSOR: GroveDigitalLightI2C0
      TARGET_SENSOR_PATH: lux
      TARGET_READING_KEY: lux
      write_debug: "true"
  air-quality:
    lang: dockerfile
    handler: ./wio
    image: dukeman/wio:1.0.0
    annotations:
      topic: cron-function
      schedule: "* * * * *"
    environment_file:
    - wio/base-env.yml
    secrets:
    - wio2
    environment:
      TOKEN_PATH: "/var/openfaas/secrets/wio2"
      TARGET_SENSOR: GroveAirqualityA0
      TARGET_SENSOR_PATH: quality
      TARGET_READING_KEY: quality
      write_debug: "true"
  humidity:
    lang: dockerfile
    handler: ./wio
    image: dukeman/wio:1.0.0
    annotations:
      topic: cron-function
      schedule: "* * * * *"
    environment_file:
    - wio/base-env.yml
    secrets:
    - wio1
    environment:
      TOKEN_PATH: "/var/openfaas/secrets/wio1"
      TARGET_SENSOR: GroveTempHumD0
      TARGET_SENSOR_PATH: humidity
      TARGET_READING_KEY: humidity
      write_debug: "true"
  moisture:
    lang: dockerfile
    handler: ./wio
    image: dukeman/wio:1.0.0
    annotations:
      topic: cron-function
      schedule: "* * * * *"
    environment_file:
    - wio/base-env.yml
    secrets:
    - wio3
    environment:
      TOKEN_PATH: "/var/openfaas/secrets/wio3"
      TARGET_SENSOR: GenericAInA0
      TARGET_SENSOR_PATH: analog
      TARGET_READING_KEY: analog
      write_debug: "true"
